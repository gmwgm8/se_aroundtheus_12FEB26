!function(){"use strict";var e="/se_aroundtheus_12FEB26/",t=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",()=>{this._handleLikeButton()}),this._deleteButton.addEventListener("click",()=>{this._handleDeleteButton()}),this._cardImage.addEventListener("click",()=>{this._handleImageClick({name:this._name,link:this._link})})}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}},s=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e,t){const s=this._form.querySelector(`.${e.id}-error`);s&&(e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass))}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);t&&(e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent="")}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some(function(e){return!e.validity.valid})}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._form.addEventListener("reset",()=>{this._disableButton()}),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._buttonElement&&(this._toggleButtonState(),this._inputList.forEach(e=>{e.addEventListener("input",()=>{this._checkInputValidity(e),this._toggleButtonState()})}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach(e=>{this._hideInputError(e)})}enableValidation(){this._form.addEventListener("submit",e=>{e.preventDefault()}),this._setEventListeners()}},n=class{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_is-opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_is-opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".modal__close").addEventListener("click",()=>{this.close()}),this._popup.addEventListener("click",e=>{e.target===this._popup&&this.close()})}},i=class extends n{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach(t=>{e[t.name]=t.value}),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})}close(){this._form.reset(),super.close()}};const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var r=e+"4e8e0a1d604782a0dff8.svg",a=e+"c15cb08ab8ecfaba54c6.jpg";const l=document.querySelector("#profile-edit-modal .modal__form"),c=document.querySelector("#add-card-modal .modal__form"),_=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button");document.querySelector(".header__image").src=r,document.querySelector(".profile__image").src=a;const u=l.querySelector(".modal__input_type_name"),m=l.querySelector(".modal__input_type_description"),h=new class{constructor({nameSelector:e,jobSelector:t}){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo({name:e,job:t}){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__title",jobSelector:".profile__description"}),p=new class extends n{constructor(e){super(e),this._image=this._popup.querySelector(".modal__preview-image"),this._caption=this._popup.querySelector(".modal__preview-caption")}open(e){this._image.src=e.link,this._image.alt=e.name,this._caption.textContent=e.name,super.open()}}("#preview-image-modal");function E(e){p.open(e)}function v(e){return new t(e,"#card-template",E).getView()}p.setEventListeners();const g=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._items.forEach(e=>{this._renderer(e)})}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=v(e);g.addItem(t)}},".cards__list"),S=new i("#profile-edit-modal",e=>{h.setUserInfo({name:e.name,job:e.description}),S.close()});S.setEventListeners();const f=new i("#add-card-modal",e=>{const t=v({name:e.title,link:e.url});g.addItem(t),f.close()});f.setEventListeners();const b=new s(o,l),L=new s(o,c);b.enableValidation(),L.enableValidation(),_.addEventListener("click",()=>{const e=h.getUserInfo();u.value=e.name,m.value=e.job,b.resetValidation(),S.open()}),d.addEventListener("click",()=>{L.resetValidation(),f.open()}),g.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xCNEQsRUFBYXBELFNBR2ZvQixFQUFpQmpGLGlCQUFpQixRQUFTLEtBQ3pDMEgsRUFBaUJyRSxrQkFDakJnRSxFQUFheEQsU0FJZnVDLEVBQVlPLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9hcm91bmR0aGV1cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9hcm91bmR0aGV1cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3NlX2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL3NlX2Fyb3VuZHRoZXVzXzEyRkVCMjYvXCI7IiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gTGlrZSBidXR0b25cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGVsZXRlIGJ1dHRvblxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gSW1hZ2UgY2xpY2sgZm9yIHByZXZpZXdcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAvL29ubHkgc2VhcmNoIG9uY2VcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gICAgLy8gU2V0IGNvbnRlbnRcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGlmICh0aGlzLl9idXR0b25FbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIC8vIENsaWNrIG9uIG92ZXJsYXkgKHNoYWRlZCBhcmVhKVxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCIvLyBWYWxpZGF0aW9uIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIEluaXRpYWwgY2FyZHMgZGF0YVxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBTZWxlY3RvcnNcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIHByb2ZpbGVGb3JtOiBcIiNwcm9maWxlLWVkaXQtbW9kYWwgLm1vZGFsX19mb3JtXCIsXG4gIGFkZENhcmRGb3JtOiBcIiNhZGQtY2FyZC1tb2RhbCAubW9kYWxfX2Zvcm1cIixcbiAgcHJvZmlsZUVkaXRCdXR0b246IFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIsXG4gIGFkZENhcmRCdXR0b246IFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIixcbiAgcHJvZmlsZU5hbWVJbnB1dDogXCIubW9kYWxfX2lucHV0X3R5cGVfbmFtZVwiLFxuICBwcm9maWxlSm9iSW5wdXQ6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCIsXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBjYXJkc0xpc3Q6IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBwcmV2aWV3SW1hZ2VNb2RhbDogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxuICBwcm9maWxlRWRpdE1vZGFsOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgYWRkQ2FyZE1vZGFsOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxufTtcbiIsIi8vIEltcG9ydCBDU1NcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG5cbi8vIEltcG9ydCBjbGFzc2VzXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG4vLyBJbXBvcnQgY29uc3RhbnRzXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25Db25maWcsIHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuXG4vLyBET00gRWxlbWVudHNcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVGb3JtKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmFkZENhcmRGb3JtKTtcblxuLy8gQnV0dG9ucyBhbmQgb3RoZXIgRE9NIG5vZGVzXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVFZGl0QnV0dG9uKTtcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hZGRDYXJkQnV0dG9uKTtcblxuLy8gQWZ0ZXIgRE9NIGxvYWRzLCBzZXQgdGhlIGltYWdlc1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2ltYWdlXCIpLnNyYyA9IGxvZ29JbWFnZTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIikuc3JjID0gcHJvZmlsZUltYWdlO1xuXG4vLyBJbXBvcnQgaW1hZ2VzXG5pbXBvcnQgbG9nb0ltYWdlIGZyb20gXCIuLi9pbWFnZXMvYXJvdW5kdGhlVVN3aGl0ZS5zdmdcIjtcbmltcG9ydCBwcm9maWxlSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9qYWNxdWVzLWNvdXN0ZWF1LmpwZ1wiO1xuXG4vLyBGb3JtIGlucHV0c1xuY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVOYW1lSW5wdXQpO1xuY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucHJvZmlsZUpvYklucHV0KTtcblxuLy8gQ3JlYXRlIFVzZXJJbmZvIGluc3RhbmNlXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSxcbiAgam9iU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlRGVzY3JpcHRpb24sXG59KTtcblxuLy8gQ3JlYXRlIFBvcHVwV2l0aEltYWdlIGluc3RhbmNlXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3SW1hZ2VNb2RhbCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBpbWFnZSBjbGlja3NcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGNhcmRcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG4vLyBDcmVhdGUgU2VjdGlvbiBpbnN0YW5jZSBmb3IgY2FyZHNcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZHNMaXN0XG4pO1xuXG4vLyBDcmVhdGUgUG9wdXBXaXRoRm9ybSBpbnN0YW5jZSBmb3IgcHJvZmlsZSBlZGl0XG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgc2VsZWN0b3JzLnByb2ZpbGVFZGl0TW9kYWwsXG4gIChmb3JtRGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogZm9ybURhdGEubmFtZSwgam9iOiBmb3JtRGF0YS5kZXNjcmlwdGlvbiB9KTtcbiAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgfVxuKTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBDcmVhdGUgUG9wdXBXaXRoRm9ybSBpbnN0YW5jZSBmb3IgYWRkIGNhcmRcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5hZGRDYXJkTW9kYWwsIChmb3JtRGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiBmb3JtRGF0YS50aXRsZSwgbGluazogZm9ybURhdGEudXJsIH0pO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG59KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBDcmVhdGUgRm9ybVZhbGlkYXRvciBpbnN0YW5jZXNcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIHByb2ZpbGVGb3JtRWxlbWVudFxuKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgYWRkQ2FyZEZvcm1FbGVtZW50XG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gRXZlbnQgbGlzdGVuZXJzIGZvciBvcGVuaW5nIG1vZGFsc1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vIFJlbmRlciBpbml0aWFsIGNhcmRzIG9uIHBhZ2UgbG9hZFxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnRcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWNhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfY2FyZEltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfZGlzYWJsZUJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVGb3JtRWxlbWVudCIsImFkZENhcmRGb3JtRWxlbWVudCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImxvZ29JbWFnZSIsInByb2ZpbGVJbWFnZSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImltYWdlUG9wdXAiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsIkNhcmQiLCJjYXJkU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRWxlbWVudCIsInByb2ZpbGVQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtRGF0YSIsImRlc2NyaXB0aW9uIiwiYWRkQ2FyZFBvcHVwIiwidGl0bGUiLCJ1cmwiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9